<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LoopModels: CostModeling::BBCost::ReductionExpansionBounds Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LoopModels
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>CostModeling</b></li><li class="navelem"><a class="el" href="structCostModeling_1_1BBCost.html">BBCost</a></li><li class="navelem"><a class="el" href="structCostModeling_1_1BBCost_1_1ReductionExpansionBounds.html">ReductionExpansionBounds</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structCostModeling_1_1BBCost_1_1ReductionExpansionBounds-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CostModeling::BBCost::ReductionExpansionBounds Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5d60fb92ce04dbee1a7ceb0a86ba25c9"><td class="memItemLeft" align="right" valign="top"><a id="a5d60fb92ce04dbee1a7ceb0a86ba25c9"></a>
constexpr auto&#160;</td><td class="memItemRight" valign="bottom"><b>choose</b> (double ub) const -&gt; std::array&lt; double, 2 &gt;</td></tr>
<tr class="separator:a5d60fb92ce04dbee1a7ceb0a86ba25c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ed888d0e64bc05b94f07a38a6738254"><td class="memItemLeft" align="right" valign="top"><a id="a2ed888d0e64bc05b94f07a38a6738254"></a>
constexpr void&#160;</td><td class="memItemRight" valign="bottom"><b>updateLowerBound</b> (double throughput, double latency, double comp)</td></tr>
<tr class="separator:a2ed888d0e64bc05b94f07a38a6738254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecbe9f60cf710e7c0502d0581e47010d"><td class="memItemLeft" align="right" valign="top"><a id="aecbe9f60cf710e7c0502d0581e47010d"></a>
constexpr auto&#160;</td><td class="memItemRight" valign="bottom"><b>updateUpperBound</b> (double ephemeral, double perennial, double register_count) -&gt; double</td></tr>
<tr class="separator:aecbe9f60cf710e7c0502d0581e47010d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a6767c377654fe6f18b58cceeb1bbf9c9"><td class="memItemLeft" align="right" valign="top"><a id="a6767c377654fe6f18b58cceeb1bbf9c9"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>upper_bound_</b></td></tr>
<tr class="separator:a6767c377654fe6f18b58cceeb1bbf9c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad24993a20dcefc9a32dca6a870916cc6"><td class="memItemLeft" align="right" valign="top"><a id="ad24993a20dcefc9a32dca6a870916cc6"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>lower_bound_</b> {1}</td></tr>
<tr class="separator:ad24993a20dcefc9a32dca6a870916cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>How often do we duplicate a reduction in registers? Duplicating a reduction in registers increases register use, and it also forces us to reduce use <code>r-1</code> instructions. When we call <code>cost</code> for a BB with latency, we narrow the upper bound to avoid register spills (to a minimum of 1), and increase the lower bound to avoid latency costs. In terms of cost handling, we:</p><ul>
<li>Avoid scaling latency by the unroll. When we select the final expansion factor, we scale latency up by unroll/factor. Note, we require this to be an integer, i.e., if unrolling by <code>4</code>, we can expand by <code>1</code>, <code>2</code>, or <code>4</code>, but not <code>3</code>.</li>
<li>Compute register costs using the upper bound. We do not retroactively update old costs. Those old costs should have lowered the upper bound appropriately to avoid penalties. The main potential issue here is that TODO: we currently don't count cost of spilling registers not used in this loop. It'd be good to handle this. </li>
</ul>
</div><hr/>The documentation for this struct was generated from the following file:<ul>
<li>mod/Optimize/BBCosts.cxx</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
