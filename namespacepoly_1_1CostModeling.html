<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LoopModels: poly::CostModeling Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LoopModels
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>poly</b></li><li class="navelem"><a class="el" href="namespacepoly_1_1CostModeling.html">CostModeling</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">poly::CostModeling Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1CPURegisterFile.html">CPURegisterFile</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1LoopTree.html">LoopTree</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpoly_1_1CostModeling_1_1LoopDepSummary.html">LoopDepSummary</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpoly_1_1CostModeling_1_1LoopIndependent.html">LoopIndependent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpoly_1_1CostModeling_1_1LoopBuild.html">LoopBuild</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1IROptimizer.html">IROptimizer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpoly_1_1CostModeling_1_1LoopDependency.html">LoopDependency</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1Costs.html">Costs</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1LoopIndexDependency.html">LoopIndexDependency</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpoly_1_1CostModeling_1_1ArrayIndex.html">ArrayIndex</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1AddrSummary.html">AddrSummary</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1LoopDependencies.html">LoopDependencies</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1ArrayCollection.html">ArrayCollection</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1UnrollOptions.html">UnrollOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1OptimizationOptions.html">OptimizationOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1ContigSummary.html">ContigSummary</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpoly_1_1CostModeling_1_1RegisterTile.html">RegisterTile</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">When we unroll, we have an ordering of the unrolled dimensions.  <a href="classpoly_1_1CostModeling_1_1RegisterTile.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa6aeef7cd61755bdc9f960519e833e79"><td class="memTemplParams" colspan="2"><a id="aa6aeef7cd61755bdc9f960519e833e79"></a>
template&lt;typename T &gt; </td></tr>
<tr class="memitem:aa6aeef7cd61755bdc9f960519e833e79"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><b>Vec</b> = math::ResizeableView&lt; T, unsigned &gt;</td></tr>
<tr class="separator:aa6aeef7cd61755bdc9f960519e833e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0df4d0eac85fdf88ba9ae676a0da497a"><td class="memItemLeft" align="right" valign="top"><a id="a0df4d0eac85fdf88ba9ae676a0da497a"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><b>searchLoopIndependentUsers</b> (<a class="el" href="classpoly_1_1poly_1_1Dependencies.html">IR::Dependencies</a> deps, <a class="el" href="classpoly_1_1IR_1_1Loop.html">IR::Loop</a> *L, <a class="el" href="classpoly_1_1IR_1_1Node.html">IR::Node</a> *N, uint8_t depth, <a class="el" href="structpoly_1_1CostModeling_1_1LoopDepSummary.html">LoopDepSummary</a> summary) -&gt; <a class="el" href="structpoly_1_1CostModeling_1_1LoopIndependent.html">LoopIndependent</a></td></tr>
<tr class="separator:a0df4d0eac85fdf88ba9ae676a0da497a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a524f7a893c83da4e930b1b3b5900a142"><td class="memItemLeft" align="right" valign="top"><a id="a524f7a893c83da4e930b1b3b5900a142"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><b>visitLoopDependent</b> (<a class="el" href="classpoly_1_1poly_1_1Dependencies.html">IR::Dependencies</a> deps, <a class="el" href="classpoly_1_1IR_1_1Loop.html">IR::Loop</a> *L, <a class="el" href="classpoly_1_1IR_1_1Node.html">IR::Node</a> *N, uint8_t depth, <a class="el" href="classpoly_1_1IR_1_1Node.html">IR::Node</a> *body) -&gt; <a class="el" href="classpoly_1_1IR_1_1Node.html">IR::Node</a> *</td></tr>
<tr class="separator:a524f7a893c83da4e930b1b3b5900a142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba4c46ffece93b5f9c5fb4ec5f706acb"><td class="memItemLeft" align="right" valign="top"><a id="aba4c46ffece93b5f9c5fb4ec5f706acb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>addBody</b> (<a class="el" href="classpoly_1_1poly_1_1Dependencies.html">IR::Dependencies</a> deps, <a class="el" href="classpoly_1_1IR_1_1Loop.html">IR::Loop</a> *root, unsigned depth, <a class="el" href="classpoly_1_1IR_1_1Node.html">IR::Node</a> *nodes)</td></tr>
<tr class="separator:aba4c46ffece93b5f9c5fb4ec5f706acb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab38eff65561f922aa24e1f9b84bd19a0"><td class="memItemLeft" align="right" valign="top"><a id="ab38eff65561f922aa24e1f9b84bd19a0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>topologicalSort</b> (<a class="el" href="classpoly_1_1poly_1_1Dependencies.html">IR::Dependencies</a> deps, <a class="el" href="classpoly_1_1IR_1_1Loop.html">IR::Loop</a> *root, unsigned depth)</td></tr>
<tr class="separator:ab38eff65561f922aa24e1f9b84bd19a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a2cd152dd4d86977fc5561e37871f4f"><td class="memItemLeft" align="right" valign="top"><a id="a2a2cd152dd4d86977fc5561e37871f4f"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><b>buildSubGraph</b> (<a class="el" href="classpoly_1_1poly_1_1Dependencies.html">IR::Dependencies</a> deps, <a class="el" href="classpoly_1_1IR_1_1Loop.html">IR::Loop</a> *root, unsigned depth, uint32_t id) -&gt; uint32_t</td></tr>
<tr class="separator:a2a2cd152dd4d86977fc5561e37871f4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae42a4c9494c05901c370ed1c0987bfc"><td class="memItemLeft" align="right" valign="top"><a id="aae42a4c9494c05901c370ed1c0987bfc"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><b>buildGraph</b> (<a class="el" href="classpoly_1_1poly_1_1Dependencies.html">IR::Dependencies</a> deps, <a class="el" href="classpoly_1_1IR_1_1Loop.html">IR::Loop</a> *root) -&gt; uint32_t</td></tr>
<tr class="separator:aae42a4c9494c05901c370ed1c0987bfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f4d60a211d927a5c3f2db40d667eafc"><td class="memItemLeft" align="right" valign="top"><a id="a9f4d60a211d927a5c3f2db40d667eafc"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><b>addAddrToGraph</b> (Arena&lt;&gt; *salloc, Arena&lt;&gt; *lalloc, <a class="el" href="classpoly_1_1lp_1_1ScheduledNode.html">lp::ScheduledNode</a> *nodes) -&gt; <a class="el" href="classpoly_1_1IR_1_1Loop.html">IR::Loop</a> *</td></tr>
<tr class="separator:a9f4d60a211d927a5c3f2db40d667eafc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07a63b9aaeba65f2dbc3b72d12e12499"><td class="memItemLeft" align="right" valign="top"><a id="a07a63b9aaeba65f2dbc3b72d12e12499"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><b>hasFutureReadsCore</b> (<a class="el" href="structpoly_1_1dict_1_1aset.html">dict::aset</a>&lt; llvm::BasicBlock * &gt; &amp;successors, llvm::Instruction *I) -&gt; bool</td></tr>
<tr class="separator:a07a63b9aaeba65f2dbc3b72d12e12499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc53591de74e64b65a5ef3b483957cf7"><td class="memItemLeft" align="right" valign="top"><a id="abc53591de74e64b65a5ef3b483957cf7"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><b>hasFutureReads</b> (Arena&lt;&gt; *alloc, dict::set&lt; llvm::BasicBlock * &gt; &amp;LBBs, llvm::Instruction *I) -&gt; bool</td></tr>
<tr class="separator:abc53591de74e64b65a5ef3b483957cf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b2c5a3ffaaba5a609c5b8f387565cc"><td class="memItemLeft" align="right" valign="top"><a id="ac6b2c5a3ffaaba5a609c5b8f387565cc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepoly_1_1CostModeling.html#ac6b2c5a3ffaaba5a609c5b8f387565cc">optimize</a> (<a class="el" href="classpoly_1_1poly_1_1Dependencies.html">IR::Dependencies</a> deps, <a class="el" href="classpoly_1_1IR_1_1Cache.html">IR::Cache</a> &amp;instr, dict::set&lt; llvm::BasicBlock * &gt; &amp;loopBBs, dict::set&lt; llvm::CallBase * &gt; &amp;eraseCandidates, Arena&lt;&gt; *lalloc, <a class="el" href="structpoly_1_1lp_1_1LoopBlock_1_1OptimizationResult.html">lp::LoopBlock::OptimizationResult</a> res)</td></tr>
<tr class="memdesc:ac6b2c5a3ffaaba5a609c5b8f387565cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optimize the schedule. <br /></td></tr>
<tr class="separator:ac6b2c5a3ffaaba5a609c5b8f387565cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd5b68d31f6b9feb50783ce6fe686eb6"><td class="memItemLeft" align="right" valign="top"><a id="acd5b68d31f6b9feb50783ce6fe686eb6"></a>
constexpr auto&#160;</td><td class="memItemRight" valign="bottom"><b>cld64</b> (unsigned x) -&gt; unsigned</td></tr>
<tr class="separator:acd5b68d31f6b9feb50783ce6fe686eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>It would be best to actually use the tree structure Let's consider a depth first search approach. A(9) --&gt; B(3) --&gt; C(2) --&gt; D(0) -&gt; E(5) --&gt; F(4) -&gt; G(1) -&gt; H(8) --&gt; I(7) --&gt; J(6) At a given level, we do need to decide whether to unroll and vectorize, using context of both upper and lower levels. Thus, it is a non-local decision that doesn't map well to a single traversal.</p>
<p>Many optimal optimization possibilities however are orthogonal with one another, so it would be wasteful to consider the full cartesian product.</p>
<p>At each loopnest level, we could consider not unrolling or vectorizing that or any outer level, and then optimize all subtrees independently. When considering these subtrees together, we must always consider them with at least one of this level or an outer level unrolled and/or vectorized.</p>
<p>One consideration pattern: [!D], [D], [!G, G], [C, !D, !G], [C, D, !G], [C, !D, G], [C, D, G], [B, C, !D, !G], [B, C, D, !G], [B, C, !D, G], [B, C, D, G]. [B, !C, !D, !G], [B, !C, D, !G], [B, !C, !D, G], [B, !C, D, G] etc So it doesn't cut down much. Note (of course) that we're not considering all of these possibilities; these are the fast ones we're willing to consider at a particular time.</p>
<p>We can have contiguous indices giving the range that an optimization possibilities applies to. E.g., if we're at <code>3</code> when we reach a loop, we have <a href="i.e., a close-close range">3, curr</a>.</p>
<p>We only need to track the best alg of each subtree, and compare that of the current root. The current root then returns the current best alg: either it's opt, or the composition of the subtrees. The recursion continues until we get the best alg for the whole tree. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
